<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Lucian Chat</title>
<style>
body{font-family:sans-serif;max-width:640px;margin:40px auto}
#log{white-space:pre-wrap;border:1px solid #ccc;padding:1em;
     height:60vh;overflow-y:auto;margin-bottom:1em}
.user{color:#004;font-weight:bold}
.bot {color:#060}
</style>
</head>
<body>
<h2>ðŸ§  Lucian Chat</h2>

<div id="log"></div>

<form id="frm">
  <input id="msg" style="width:75%" placeholder="Ask Lucianâ€¦" autocomplete="off">
  <button>Send</button>
</form>

<script>
const log = document.getElementById('log');
document.getElementById('frm').onsubmit = async (e)=>{
  e.preventDefault();
  const prompt = document.getElementById('msg').value.trim();
  if(!prompt) return;
  append('You', prompt, 'user');
  document.getElementById('msg').value='';
  try{
    const res = await fetch('/ask', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({user:'web', prompt})
    });
    const data = await res.json();
    append('Lucian', data.answer, 'bot');
  }catch(err){
    append('Error', 'â›” '+err, 'bot');
  }
};
function append(who,text,cls){
  log.insertAdjacentHTML('beforeend',
    `<div class="${cls}"><b>${who}:</b> ${text}</div>`);
  log.scrollTop = log.scrollHeight;
}
</script>
</body>
</html>
